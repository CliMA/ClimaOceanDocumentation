<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public ¬∑ ClimaOcean.jl</title><meta name="title" content="Public ¬∑ ClimaOcean.jl"/><meta property="og:title" content="Public ¬∑ ClimaOcean.jl"/><meta property="twitter:title" content="Public ¬∑ ClimaOcean.jl"/><meta name="description" content="Documentation for ClimaOcean.jl."/><meta property="og:description" content="Documentation for ClimaOcean.jl."/><meta property="twitter:description" content="Documentation for ClimaOcean.jl."/><meta property="og:url" content="https://clima.github.io/ClimaOceanDocumentation/dev/library/public/"/><meta property="twitter:url" content="https://clima.github.io/ClimaOceanDocumentation/dev/library/public/"/><link rel="canonical" href="https://clima.github.io/ClimaOceanDocumentation/dev/library/public/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ClimaOcean.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../literated/single_column_os_papa_simulation/">Single-column simulation</a></li><li><a class="tocitem" href="../../literated/one_degree_simulation/">One-degree Ocean simulation</a></li><li><a class="tocitem" href="../../literated/near_global_ocean_simulation/">Near-global Ocean simulation</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../outline/">Contents</a></li><li class="is-active"><a class="tocitem" href>Public</a><ul class="internal"><li><a class="tocitem" href="#ClimaOcean"><span>ClimaOcean</span></a></li><li><a class="tocitem" href="#Diagnostics"><span>Diagnostics</span></a></li><li><a class="tocitem" href="#InitialConditions"><span>InitialConditions</span></a></li><li><a class="tocitem" href="#DataWrangling"><span>DataWrangling</span></a></li><li><a class="tocitem" href="#ECCO"><span>ECCO</span></a></li><li><a class="tocitem" href="#EN4"><span>EN4</span></a></li><li><a class="tocitem" href="#JRA55"><span>JRA55</span></a></li><li><a class="tocitem" href="#Bathymetry"><span>Bathymetry</span></a></li><li><a class="tocitem" href="#VerticalGrids"><span>VerticalGrids</span></a></li><li><a class="tocitem" href="#OceanSeaIceModels"><span>OceanSeaIceModels</span></a></li><li><a class="tocitem" href="#InterfaceComputations"><span>InterfaceComputations</span></a></li></ul></li><li><a class="tocitem" href="../internals/">Private</a></li><li><a class="tocitem" href="../function_index/">Function index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Public</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaOcean.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaOcean.jl/blob/main/docs/src/library/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-Documentation"><a class="docs-heading-anchor" href="#Public-Documentation">Public Documentation</a><a id="Public-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Public-Documentation" title="Permalink"></a></h1><p>Documentation for <code>ClimaOcean.jl</code>&#39;s public interface.</p><p>See the Internals section of the manual for internal package docs covering all submodules.</p><h2 id="ClimaOcean"><a class="docs-heading-anchor" href="#ClimaOcean">ClimaOcean</a><a id="ClimaOcean-1"></a><a class="docs-heading-anchor-permalink" href="#ClimaOcean" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.ClimaOcean" href="#ClimaOcean.ClimaOcean"><code>ClimaOcean.ClimaOcean</code></a> ‚Äî <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>&lt;!‚Äì Title ‚Äì&gt; &lt;h1 align=&quot;center&quot;&gt;   ClimaOcean.jl &lt;/h1&gt;</p><p>&lt;!‚Äì description ‚Äì&gt; &lt;p align=&quot;center&quot;&gt;   &lt;strong&gt;üåé A framework for realistic ocean-only and coupled ocean + sea-ice simulations driven by prescribed atmospheres and based on &lt;a href=https://github.com/CliMA/Oceananigans.jl&gt;Oceananigans&lt;/a&gt; and &lt;a href=https://github.com/CliMA/ClimaSeaIce.jl&gt;ClimaSeaIce&lt;/a&gt;&lt;/strong&gt;. &lt;/p&gt;</p><p><strong></strong></p><p><a href="https://doi.org/10.5281/zenodo.7677442"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.7677442.svg?style=flat-square" alt="DOI"/></a> <a href="https://buildkite.com/clima/climaocean-ci"><img src="https://badge.buildkite.com/3113cca353b83df3b5855d3f0d69827124614aef7017c835d2.svg?style=flat-square" alt="Build status"/></a> <a href="https://clima.github.io/ClimaOceanDocumentation/stable"><img src="https://img.shields.io/badge/documentation-stable%20release-blue?style=flat-square" alt="Documentation"/></a> <a href="https://clima.github.io/ClimaOceanDocumentation/dev"><img src="https://img.shields.io/badge/documentation-in%20development-orange?style=flat-square" alt="Documentation"/></a></p><p><strong>Installation</strong></p><p>ClimaOcean is a registered package. To install from a Julia REPL:</p><pre><code class="language-julia hljs">julia&gt; using Pkg

julia&gt; Pkg.add(&quot;ClimaOcean&quot;)

julia&gt; Pkg.instantiate()</code></pre><p>Use <code>Pkg.add(url=&quot;https://github.com/CliMA/ClimaOcean.jl.git&quot;, rev=&quot;main&quot;)</code> to install the latest version of <code>ClimaOcean</code>. For more information, see the <a href="https://pkgdocs.julialang.org">documentation for <code>Pkg.jl</code></a>.</p><p><strong>Why? What&#39;s the difference between ClimaOcean and <a href="https://github.com/CliMA/Oceananigans.jl">Oceananigans</a>?</strong></p><p>Oceananigans is a general-purpose library for ocean-flavored fluid dynamics. ClimaOcean implements a framework for driving realistic Oceananigans simulations with prescribed atmospheres, and coupling them to prognostic sea ice simulations.</p><p><strong>A core abstraction: <code>ClimaOcean.OceanSeaIceModel</code></strong></p><p>Our system for realistic modeling is anchored by <code>ClimaOcean.OceanSeaIceModel</code>, which encapsulates the ocean simulation, sea ice simulation, prescribed atmospheric state, and specifies how the three communicate. To illustrate how <code>OceanSeaIceModel</code> works we set up a simulation on a grid with 10 vertical levels and 1/4-degree horizontal resolution:</p><pre><code class="language-julia hljs">using Oceananigans
using Oceananigans.Units
using Dates, CFTime
import ClimaOcean

arch = GPU()
grid = LatitudeLongitudeGrid(arch,
                             size = (1440, 560, 10),
                             halo = (7, 7, 7),
                             longitude = (0, 360),
                             latitude = (-70, 70),
                             z = (-3000, 0))

bathymetry = ClimaOcean.regrid_bathymetry(grid) # builds gridded bathymetry based on ETOPO1
grid = ImmersedBoundaryGrid(grid, GridFittedBottom(bathymetry))

# Build an ocean simulation initialized to the ECCO state estimate on Jan 1, 1993
ocean = ClimaOcean.ocean_simulation(grid)
start_date = DateTime(1993, 1, 1)
set!(ocean.model,
     T=ClimaOcean.Metadata(:temperature; dates=start_date, dataset=ClimaOcean.ECCO4Monthly()),
     S=ClimaOcean.Metadata(:salinity;    dates=start_date, dataset=ClimaOcean.ECCO4Monthly()))

# Build and run an OceanSeaIceModel (with no sea ice component) forced by JRA55 reanalysis
atmosphere = ClimaOcean.JRA55PrescribedAtmosphere(arch)
coupled_model = ClimaOcean.OceanSeaIceModel(ocean; atmosphere)
simulation = Simulation(coupled_model, Œît=5minutes, stop_time=30days)
run!(simulation)</code></pre><p>The simulation above achieves approximately 8 simulated years per day of wall time on an Nvidia H100 GPU.</p><p>Since <code>ocean.model</code> is an <code>Oceananigans.HydrostaticFreeSurfaceModel</code>, we can leverage <code>Oceananigans</code> features in our scripts. For example, to plot the surface speed at the end of the simulation we write</p><pre><code class="language-julia hljs">u, v, w = ocean.model.velocities
speed = Field(sqrt(u^2 + v^2))
compute!(speed)

using GLMakie
heatmap(view(speed, :, :, ocean.model.grid.Nz), colorrange=(0, 0.5), colormap=:magma, nan_color=:lightgray)</code></pre><p>which produces</p><p><img src="https://github.com/user-attachments/assets/4c484b93-38fe-4840-bf7d-63a3a59d29e1" alt="image"/></p><p><strong>Additional features: a utility for <code>ocean_simulation</code>s and data wrangling</strong></p><p>A second core abstraction in ClimaOcean is <code>ocean_simulation</code>. <code>ocean_simulation</code> configures an Oceananigans model for realistic simulations including temperature and salinity, the TEOS-10 equation of state, boundary conditions to store computed air-sea fluxes, the automatically-calibrated turbulence closure <code>CATKEVerticalDiffusivity</code>, and the <a href="http://doi.org/10.1029/2023MS004130"><code>WENOVectorInvariant</code> advection scheme</a> for mesoscale-turbulence-resolving simulations.</p><p>ClimaOcean also provides convenience features for wrangling datasets of bathymetry, ocean temperature, salinity, ocean velocity fields, and prescribed atmospheric states.</p><p>ClimaOcean is built on top of Oceananigans and <a href="https://github.com/CliMA/ClimaSeaIce.jl">ClimaSeaIce</a>, so it&#39;s important that ClimaOcean users become proficient with <a href="https://github.com/CliMA/Oceananigans.jl">Oceananigans</a>. Note that though ClimaOcean is currently focused on hydrostatic modeling with <code>Oceananigans.HydrostaticFreeSurfaceModel</code>, realistic nonhydrostatic modeling is also within the scope of this package.</p><p><strong>Citing</strong></p><p>If you use ClimaOcean for your research, teaching, or fun ü§©, everyone in our community will be grateful if you give credit by citing the corresponding Zenodo record, e.g.,</p><blockquote><p>Wagner, G. L. et al. (2025). CliMA/ClimaOcean.jl: v0.5.4 (v0.5.4). Zenodo. https://doi.org/10.5281/zenodo.15042648</p></blockquote><p>and also the recent <a href="https://arxiv.org/abs/2502.14148">preprint submitted to the Journal of Advances in Modeling Earth Systems</a> that presents an overview of all the things that make Oceananigans unique:</p><blockquote><p>&quot;High-level, high-resolution ocean modeling at all scales with Oceananigans&quot;</p><p>by Gregory L. Wagner, Simone Silvestri, Navid C. Constantinou, Ali Ramadhan, Jean-Michel Campin, Chris Hill, Tomas Chor, Jago Strong-Wright, Xin Kai Lee, Francis Poulin, Andre Souza, Keaton J. Burns, John Marshall, Raffaele Ferrari</p><p>submitted to the Journal of Advances in Modeling Earth Systems, arXiv 2502.14148</p></blockquote><p>&lt;details&gt;&lt;summary&gt;bibtex&lt;/summary&gt;   &lt;pre&gt;&lt;code&gt;@article{Oceananigans-overview-paper-2025,   title = {{High-level, high-resolution ocean modeling at all scales with Oceananigans}},   author = {G. L. Wagner and S. Silvestri and N. C. Constantinou and A. Ramadhan and J.-M. Campin and C. Hill and T. Chor and J. Strong-Wright and X. K. Lee and F. Poulin and A. Souza and K. J. Burns and J. Marshall and R. Ferrari},   journal = {arXiv preprint},   year = {2025},   archivePrefix = {arXiv},   eprint = {2502.14148},   doi = {10.48550/arXiv.2502.14148},   notes = {submitted to the Journal of Advances in Modeling Earth Systems}, }&lt;/code&gt;&lt;/pre&gt; &lt;/details&gt;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/ClimaOcean.jl#L4-L135">source</a></section></article><h2 id="Diagnostics"><a class="docs-heading-anchor" href="#Diagnostics">Diagnostics</a><a id="Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Diagnostics.MixedLayerDepthField-Tuple{Any, Any, Any}" href="#ClimaOcean.Diagnostics.MixedLayerDepthField-Tuple{Any, Any, Any}"><code>ClimaOcean.Diagnostics.MixedLayerDepthField</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MixedLayerDepthField(bm, grid, tracers; difference_criterion=1e-4)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/Diagnostics/mixed_layer_depth.jl#L18-L21">source</a></section></article><h2 id="InitialConditions"><a class="docs-heading-anchor" href="#InitialConditions">InitialConditions</a><a id="InitialConditions-1"></a><a class="docs-heading-anchor-permalink" href="#InitialConditions" title="Permalink"></a></h2><h2 id="DataWrangling"><a class="docs-heading-anchor" href="#DataWrangling">DataWrangling</a><a id="DataWrangling-1"></a><a class="docs-heading-anchor-permalink" href="#DataWrangling" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.DatasetRestoring" href="#ClimaOcean.DataWrangling.DatasetRestoring"><code>ClimaOcean.DataWrangling.DatasetRestoring</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DatasetRestoring(metadata::Metadata,
                 arch_or_grid = CPU();
                 rate,
                 mask = 1,
                 time_indices_in_memory = 2, # Not more than this if we want to use GPU!
                 time_indexing = Cyclical(),
                 inpainting = NearestNeighborInpainting(Inf),
                 cache_inpainted_data = true)</code></pre><p>Return a forcing term that restores to data from a dataset. The restoring is applied as a forcing on the right hand side of the evolution equations, calculated as:</p><p class="math-container">\[F_œà = r Œº (œà_{dataset} - œà)\]</p><p>where <span>$Œº$</span> is the mask, <span>$r$</span> is the restoring rate, <span>$œà$</span> is the simulation variable, and <span>$œà_{dataset}$</span> is the dataset variable that is linearly interpolated in space and time from the dataset of choice to the simulation grid and time.</p><p><strong>Arguments</strong></p><ul><li><p><code>metadata</code>: The medatada for a dataset variable to restore. Choices for variables include:</p><ul><li><code>:temperature</code>,</li><li><code>:salinity</code>,</li><li><code>:u_velocity</code>,</li><li><code>:v_velocity</code>,</li><li><code>:sea_ice_thickness</code>,</li><li><code>:sea_ice_area_fraction</code>.</li></ul></li><li><p><code>arch_or_grid</code>: Either the architecture of the simulation, or a grid on which the data                 is pre-interpolated when loaded. If an <code>arch</code>itecture is provided, such as                 <code>arch_or_grid = CPU()</code> or <code>arch_or_grid = GPU()</code>, data is interpolated                 on-the-fly when the forcing tendency is computed. Default: CPU().</p></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><p><code>rate</code>: The restoring rate, i.e., the inverse of the restoring timescale (in s‚Åª¬π).</p></li><li><p><code>mask</code>: The mask value. Can be a function of <code>(x, y, z, time)</code>, an array, or a number.</p></li><li><p><code>time_indices_in_memory</code>: The number of time indices to keep in memory. The number is chosen based on                           a trade-off between increased performance (more indices in memory) and reduced                           memory footprint (fewer indices in memory). Default: 2.</p></li><li><p><code>time_indexing</code>: The time indexing scheme for the field time series. Default: <code>Cyclical()</code>.</p></li><li><p><code>inpainting</code>: inpainting algorithm, see <a href="../internals/#ClimaOcean.DataWrangling.inpaint_mask!-Tuple{Any, Any}"><code>inpaint_mask!</code></a>. Default: <code>NearestNeighborInpainting(Inf)</code>.</p></li><li><p><code>cache_inpainted_data</code>: If <code>true</code>, the data is cached to disk after inpainting for later retrieving.                         Default: <code>true</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/restoring.jl#L223-L277">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.LinearlyTaperedPolarMask-Tuple{}" href="#ClimaOcean.DataWrangling.LinearlyTaperedPolarMask-Tuple{}"><code>ClimaOcean.DataWrangling.LinearlyTaperedPolarMask</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LinearlyTaperedPolarMask(; northern = (70,   75),
                           southern = (-75, -70),
                           z = (-20, 0))</code></pre><p>Build a mask that is linearly tapered in latitude between the northern and southern edges. The mask is constant in depth between the z and equals zero everywhere else. The mask is limited to lie between (0, 1). The mask has the following functional form:</p><pre><code class="language-julia hljs">n = 1 / (northern[2] - northern[1]) * (œÜ - northern[1])
s = 1 / (southern[1] - southern[2]) * (œÜ - southern[2])

valid_depth = (z[1] &lt; z &lt; z[2])

mask = valid_depth ? clamp(max(n, s), 0, 1) : 0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/masking.jl#L17-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.Metadata-Tuple{Any}" href="#ClimaOcean.DataWrangling.Metadata-Tuple{Any}"><code>ClimaOcean.DataWrangling.Metadata</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Metadata(variable_name;
         dataset,
         dates = all_dates(dataset, variable_name),
         dir = default_download_directory(dataset))</code></pre><p>Metadata holding a specific dataset information.</p><p><strong>Argument</strong></p><ul><li><code>variable_name</code>: a symbol representing the name of the variable (for example, <code>:temperature</code>,                  <code>:salinity</code>, <code>:u_velocity</code>, etc)</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>dataset</code>: Supported datasets are <code>ECCO2Monthly()</code>, <code>ECCO2Daily()</code>, <code>ECCO4Monthly()</code>, <code>EN4Monthly()</code>,            <code>RepeatYearJRA55()</code>, and <code>MultiYearJRA55()</code>.</li><li><code>dates</code>: The dates of the dataset (<code>Dates.AbstractDateTime</code> or <code>CFTime.AbstractCFDateTime</code>).          Note that <code>dates</code> can either be a range or a vector of dates, representing a time-series.          For a single date, use <a href="#ClimaOcean.DataWrangling.Metadatum-Tuple{Any}"><code>Metadatum</code></a>.</li><li><code>start_date</code>: If <code>dates = nothing</code>, we can prescribe the first date of metadata as a date               (<code>Dates.AbstractDateTime</code> or <code>CFTime.AbstractCFDateTime</code>). <code>start_date</code> should lie               within the date range of the dataset. Default: nothing.</li><li><code>end_date</code>: If <code>dates = nothing</code>, we can prescribe the last date of metadata as a date             (<code>Dates.AbstractDateTime</code> or <code>CFTime.AbstractCFDateTime</code>). <code>end_date</code> should lie               within the date range of the dataset. Default: nothing.</li><li><code>dir</code>: The directory where the dataset is stored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/metadata.jl#L12-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.Metadatum-Tuple{Any}" href="#ClimaOcean.DataWrangling.Metadatum-Tuple{Any}"><code>ClimaOcean.DataWrangling.Metadatum</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Metadatum(variable_name;
          dataset,
          date = first_date(dataset, variable_name),
          dir = default_download_directory(dataset))</code></pre><p>A specialized constructor for a <a href="#ClimaOcean.DataWrangling.Metadata-Tuple{Any}"><code>Metadata</code></a> object with a single date, representative of a snapshot in time.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/metadata.jl#L57-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.all_dates-Tuple{Any}" href="#ClimaOcean.DataWrangling.all_dates-Tuple{Any}"><code>ClimaOcean.DataWrangling.all_dates</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">all_dates(metadata)</code></pre><p>Extract all the dates of the given <code>metadata</code> formatted using the <code>DateTime</code> type. Note: This methods needs to be extended for any new dataset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/metadata.jl#L150-L155">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.first_date-Tuple{Any, Any}" href="#ClimaOcean.DataWrangling.first_date-Tuple{Any, Any}"><code>ClimaOcean.DataWrangling.first_date</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">first_date(dataset, variable_name)</code></pre><p>Extracts the first date of the given dataset and variable name formatted using the <code>DateTime</code> type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/metadata.jl#L165-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.first_date-Tuple{Any}" href="#ClimaOcean.DataWrangling.first_date-Tuple{Any}"><code>ClimaOcean.DataWrangling.first_date</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">first_date(dataset)</code></pre><p>Extract the first date of the given dataset using the <code>DateTime</code> type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/metadata.jl#L158-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.last_date-Tuple{Any, Any}" href="#ClimaOcean.DataWrangling.last_date-Tuple{Any, Any}"><code>ClimaOcean.DataWrangling.last_date</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">last_date(dataset, variable_name)</code></pre><p>Extracts the last date of the given dataset and variable name formatted using the <code>DateTime</code> type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/metadata.jl#L172-L176">source</a></section></article><h2 id="ECCO"><a class="docs-heading-anchor" href="#ECCO">ECCO</a><a id="ECCO-1"></a><a class="docs-heading-anchor-permalink" href="#ECCO" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.ECCO.ECCOMetadatum-Tuple{Any}" href="#ClimaOcean.DataWrangling.ECCO.ECCOMetadatum-Tuple{Any}"><code>ClimaOcean.DataWrangling.ECCO.ECCOMetadatum</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ECCOMetadatum(name;
              date = first_date(ECCO4Monthly(), name),
              dir = download_ECCO_cache)</code></pre><p>An alias to construct a <a href="#ClimaOcean.DataWrangling.Metadatum-Tuple{Any}"><code>Metadatum</code></a> of <code>ECCO4Monthly()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/ECCO/ECCO_metadata.jl#L26-L32">source</a></section></article><h2 id="EN4"><a class="docs-heading-anchor" href="#EN4">EN4</a><a id="EN4-1"></a><a class="docs-heading-anchor-permalink" href="#EN4" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.EN4.EN4Metadatum-Tuple{Any}" href="#ClimaOcean.DataWrangling.EN4.EN4Metadatum-Tuple{Any}"><code>ClimaOcean.DataWrangling.EN4.EN4Metadatum</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EN4Metadatum(name;
             date = first_date(EN4Monthly()),
             dir = download_EN4_cache)</code></pre><p>An alias to construct a <a href="#ClimaOcean.DataWrangling.Metadatum-Tuple{Any}"><code>Metadatum</code></a> of <code>EN4Monthly</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/EN4/EN4_metadata.jl#L25-L31">source</a></section></article><h2 id="JRA55"><a class="docs-heading-anchor" href="#JRA55">JRA55</a><a id="JRA55-1"></a><a class="docs-heading-anchor-permalink" href="#JRA55" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.JRA55.JRA55FieldTimeSeries" href="#ClimaOcean.DataWrangling.JRA55.JRA55FieldTimeSeries"><code>ClimaOcean.DataWrangling.JRA55.JRA55FieldTimeSeries</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">JRA55FieldTimeSeries(variable_name, architecture=CPU(), FT=Float32;
                     dataset = RepeatYearJRA55(),
                     dates = all_JRA55_dates(version),
                     latitude = nothing,
                     longitude = nothing,
                     dir = download_JRA55_cache,
                     backend = InMemory(),
                     time_indexing = Cyclical())</code></pre><p>Return a <code>FieldTimeSeries</code> containing atmospheric reanalysis data for <code>variable_name</code>, which describes one of the variables from the Japanese 55-year atmospheric reanalysis for driving ocean-sea ice models (JRA55-do). The JRA55-do dataset is described by:</p><blockquote><p>Tsujino et al. (2018). JRA-55 based surface dataset for driving ocean-sea-ice models (JRA55-do), <em>Ocean Modelling</em>, <strong>130(1)</strong>, 79-139</p></blockquote><p>The <code>variable_name</code>s (and their <code>shortname</code>s used in the netCDF files) available from the JRA55-do are:</p><ul><li><code>:river_freshwater_flux</code>              (&quot;friver&quot;)</li><li><code>:rain_freshwater_flux</code>               (&quot;prra&quot;)</li><li><code>:snow_freshwater_flux</code>               (&quot;prsn&quot;)</li><li><code>:iceberg_freshwater_flux</code>            (&quot;licalvf&quot;)</li><li><code>:specific_humidity</code>                  (&quot;huss&quot;)</li><li><code>:sea_level_pressure</code>                 (&quot;psl&quot;)</li><li><code>:relative_humidity</code>                  (&quot;rhuss&quot;)</li><li><code>:downwelling_longwave_radiation</code>     (&quot;rlds&quot;)</li><li><code>:downwelling_shortwave_radiation</code>    (&quot;rsds&quot;)</li><li><code>:temperature</code>                        (&quot;ras&quot;)</li><li><code>:eastward_velocity</code>                  (&quot;uas&quot;)</li><li><code>:northward_velocity</code>                 (&quot;vas&quot;)</li></ul><p><strong>Keyword arguments</strong></p><ul><li><p><code>architecture</code>: Architecture for the <code>FieldTimeSeries</code>. Default: CPU()</p></li><li><p><code>dataset</code>: The data dataset; supported datasets are: <code>RepeatYearJRA55()</code> and <code>MultiYearJRA55()</code>.            <code>MultiYearJRA55()</code> refers to the full length of the JRA55-do dataset; <code>RepeatYearJRA55()</code>            refers to the &quot;repeat-year forcing&quot; dataset derived from JRA55-do. Default: <code>RepeatYearJRA55()</code>.</p><div class="admonition is-info" id="Repeat-year-forcing-a914b2af98916b53"><header class="admonition-header">Repeat-year forcing<a class="admonition-anchor" href="#Repeat-year-forcing-a914b2af98916b53" title="Permalink"></a></header><div class="admonition-body"></div></div><p>For more information about the derivation of the repeat-year forcing dataset, see:</p><blockquote><p>Stewart et al. (2020). JRA55-do-based repeat year forcing datasets for driving ocean‚Äìsea-ice models, <em>Ocean Modelling</em>, <strong>147</strong>, 101557, https://doi.org/10.1016/j.ocemod.2019.101557.</p></blockquote><p>The repeat year in <code>RepeatYearJRA55()</code> corresponds to May 1st, 1990 - April 30th, 1991. However, the returned dataset has dates that range from January 1st to December 31st. This implies that the first 4 months of the <code>JRA55RepeatYear()</code> dataset correspond to year 1991 from the JRA55 reanalysis and the rest 8 months from 1990.</p></li><li><p><code>start_date</code>: The starting date to use for the dataset. Default: <code>first_date(dataset, variable_name)</code>.</p></li><li><p><code>end_date</code>: The ending date to use for the dataset. Default: <code>end_date(dataset, variable_name)</code>.</p></li><li><p><code>dir</code>: The directory of the data file. Default: <code>ClimaOcean.JRA55.download_JRA55_cache</code>.</p></li><li><p><code>time_indexing</code>: The time indexing scheme for the field time series. Default: <code>Cyclical()</code>.</p></li><li><p><code>latitude</code>: Guiding latitude bounds for the resulting grid.             Used to slice the data when loading into memory.             Default: nothing, which retains the latitude range of the native grid.</p></li><li><p><code>longitude</code>: Guiding longitude bounds for the resulting grid.              Used to slice the data when loading into memory.              Default: nothing, which retains the longitude range of the native grid.</p></li><li><p><code>backend</code>: Backend for the <code>FieldTimeSeries</code>. The two options are:</p><ul><li><code>InMemory()</code>: the whole time series is loaded into memory.</li><li><code>JRA55NetCDFBackend(total_time_instances_in_memory)</code>: only a subset of the time series</li></ul><p>is loaded into memory. Default: <code>InMemory()</code>.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/JRA55/JRA55_field_time_series.jl#L226-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.JRA55.JRA55PrescribedAtmosphere" href="#ClimaOcean.DataWrangling.JRA55.JRA55PrescribedAtmosphere"><code>ClimaOcean.DataWrangling.JRA55.JRA55PrescribedAtmosphere</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">JRA55PrescribedAtmosphere([architecture = CPU(), FT = Float32];
                          dataset = RepeatYearJRA55(),
                          start_date = first_date(dataset, :temperature),
                          end_date = last_date(dataset, :temperature),
                          backend = JRA55NetCDFBackend(10),
                          time_indexing = Cyclical(),
                          surface_layer_height = 10,  # meters
                          include_rivers_and_icebergs = false,
                          other_kw...)</code></pre><p>Return a <a href="@ref"><code>PrescribedAtmosphere</code></a> representing JRA55 reanalysis data. The atmospheric data will be held in <code>JRA55FieldTimeSeries</code> objects containing. For a detailed description of the keyword arguments, see the <a href="#ClimaOcean.DataWrangling.JRA55.JRA55FieldTimeSeries"><code>JRA55FieldTimeSeries</code></a> constructor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/DataWrangling/JRA55/JRA55_prescribed_atmosphere.jl#L7-L21">source</a></section></article><h2 id="Bathymetry"><a class="docs-heading-anchor" href="#Bathymetry">Bathymetry</a><a id="Bathymetry-1"></a><a class="docs-heading-anchor-permalink" href="#Bathymetry" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Bathymetry.download_bathymetry-Tuple{}" href="#ClimaOcean.Bathymetry.download_bathymetry-Tuple{}"><code>ClimaOcean.Bathymetry.download_bathymetry</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">download_bathymetry(; dir = download_bathymetry_cache,
                      url = etopo_url,
                      filename = &quot;ETOPO_2022_v1_60s_N90W180_surface.nc&quot;)</code></pre><p>Download the bathymetry from <code>url</code> and saves it under <code>filename</code> in the directory <code>dir</code> and return the full filepath where the bathymetry is saved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/Bathymetry.jl#L38-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Bathymetry.regrid_bathymetry-Tuple{Any}" href="#ClimaOcean.Bathymetry.regrid_bathymetry-Tuple{Any}"><code>ClimaOcean.Bathymetry.regrid_bathymetry</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">regrid_bathymetry(target_grid;
                  height_above_water = nothing,
                  minimum_depth = 0,
                  dir = download_bathymetry_cache,
                  url = ClimaOcean.Bathymetry.etopo_url,
                  filename = &quot;ETOPO_2022_v1_60s_N90W180_surface.nc&quot;,
                  interpolation_passes = 1,
                  major_basins = 1)</code></pre><p>Return bathymetry associated with the NetCDF file at <code>path = joinpath(dir, filename)</code> regridded onto <code>target_grid</code>. If <code>path</code> does not exist, then a download is attempted from <code>joinpath(url, filename)</code>.</p><p><strong>Arguments</strong></p><ul><li><code>target_grid</code>: grid to interpolate the bathymetry onto.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><p><code>height_above_water</code>: limits the maximum height of above-water topography (where <span>$h &gt; 0$</span>) before interpolating.                       Default: <code>nothing</code>, which implies that the original topography is retained.</p></li><li><p><code>minimum_depth</code>: minimum depth for the shallow regions, defined as a positive value.                  <code>h &gt; - minimum_depth</code> is considered land. Default: 0.</p></li><li><p><code>dir</code>: directory of the bathymetry-containing file. Default: <code>download_bathymetry_cache</code>.</p></li><li><p><code>filename</code>: file containing bathymetric data. Must be netCDF with fields:</p><ol><li><code>lat</code> vector of latitude nodes</li><li><code>lon</code> vector of longitude nodes</li><li><code>z</code> matrix of depth values</li></ol></li><li><p><code>interpolation_passes</code>: regridding/interpolation passes. The bathymetry is interpolated in                         <code>interpolation_passes - 1</code> intermediate steps. The more the interpolation                         steps the smoother the final bathymetry becomes.</p><p><strong>Example</strong></p><p>Interpolating from a 400 x 200 grid to a 100 x 100 grid in 4 passes involves:</p><ul><li>400 x 200 ‚Üí 325 x 175</li><li>325 x 175 ‚Üí 250 x 150</li><li>250 x 150 ‚Üí 175 x 125</li><li>175 x 125 ‚Üí 100 x 100</li></ul><p>If <em>coarsening</em> the original grid, linear interpolation in passes is equivalent to applying a smoothing filter, with more passes increasing the strength of the filter. If <em>refining</em> the original grid, additional passes do not help and no intermediate steps are performed.</p></li><li><p><code>major_basins</code>: Number of &quot;independent major basins&quot;, or fluid regions fully encompassed by land,                 that are retained by <a href="../internals/#ClimaOcean.Bathymetry.remove_minor_basins!-Tuple{Oceananigans.Fields.Field, Any}"><code>remove_minor_basins!</code></a>. Basins are removed by order of size:                 the smallest basins are removed first. <code>major_basins = 1</code> retains only the largest basin.                 If <code>Inf</code> then no basins are removed. Default: 1.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/Bathymetry.jl#L60-L117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Bathymetry.retrieve_bathymetry-Tuple{Any, Any}" href="#ClimaOcean.Bathymetry.retrieve_bathymetry-Tuple{Any, Any}"><code>ClimaOcean.Bathymetry.retrieve_bathymetry</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">retrieve_bathymetry(grid, filename; kw...)</code></pre><p>Retrieve the bathymetry data from a file or generate it using a grid and save it to a file.</p><p><strong>Arguments</strong></p><ul><li><code>grid</code>: The grid used to generate the bathymetry data.</li><li><code>filename</code>: The name of the file to read or save the bathymetry data.</li><li><code>kw...</code>: Additional keyword arguments.</li></ul><p><strong>Returns</strong></p><ul><li><code>bottom_height</code>: The retrieved or generated bathymetry data.</li></ul><p>If the specified file exists, the function reads the bathymetry data from the file. Otherwise, it generates the bathymetry data using the provided grid and saves it to the file before returning it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/Bathymetry.jl#L437-L456">source</a></section></article><h2 id="VerticalGrids"><a class="docs-heading-anchor" href="#VerticalGrids">VerticalGrids</a><a id="VerticalGrids-1"></a><a class="docs-heading-anchor-permalink" href="#VerticalGrids" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.VerticalGrids.stretched_vertical_faces-Tuple{}" href="#ClimaOcean.VerticalGrids.stretched_vertical_faces-Tuple{}"><code>ClimaOcean.VerticalGrids.stretched_vertical_faces</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stretched_vertical_faces(; surface_layer_Œîz = 5.0,
                           surface_layer_height = 100.0,
                           constant_bottom_spacing_depth = Inf,
                           maximum_Œîz = Inf,
                           stretching = PowerLawStretching(1.02),
                           rounding_digits = 1,
                           depth = 5000)</code></pre><p>Return an array of cell interfaces with <code>surface_layer_Œîz</code> spacing in a surface layer of height <code>surface_layer_height</code>, and stretched according to the function <code>stretching(Œîz_above, z_above)</code> down to <code>depth</code>. The interfaces extends from <code>Lz = -z[1]</code> to <code>0 = z[end]</code>, where <code>Lz ‚â• depth</code>.</p><p>The grid spacing <code>Œîz</code> is limited to be less than <code>maximum_Œîz</code>. The grid is also uniformly-spaced below <code>constant_bottom_spacing_depth</code>.</p><p><code>rounding_digits</code> controls the accuracy with which the grid face positions are saved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/VerticalGrids.jl#L26-L44">source</a></section></article><h2 id="OceanSeaIceModels"><a class="docs-heading-anchor" href="#OceanSeaIceModels">OceanSeaIceModels</a><a id="OceanSeaIceModels-1"></a><a class="docs-heading-anchor-permalink" href="#OceanSeaIceModels" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.FreezingLimitedOceanTemperature" href="#ClimaOcean.OceanSeaIceModels.FreezingLimitedOceanTemperature"><code>ClimaOcean.OceanSeaIceModels.FreezingLimitedOceanTemperature</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FreezingLimitedOceanTemperature(FT=Float64; liquidus=LinearLiquidus(FT))</code></pre><p>The minimal possible sea ice representation, clipping the temperature below to the freezing point. Not really a &quot;model&quot;&#39; per se, however, it is the most simple way to make sure that temperature does not dip below freezing.</p><p>The melting temperature is a function of salinity and is controlled by the <code>liquidus</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/freezing_limited_ocean_temperature.jl#L11-L19">source</a></section></article><h2 id="InterfaceComputations"><a class="docs-heading-anchor" href="#InterfaceComputations">InterfaceComputations</a><a id="InterfaceComputations-1"></a><a class="docs-heading-anchor-permalink" href="#InterfaceComputations" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.InterfaceComputations.BulkTemperature" href="#ClimaOcean.OceanSeaIceModels.InterfaceComputations.BulkTemperature"><code>ClimaOcean.OceanSeaIceModels.InterfaceComputations.BulkTemperature</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct BulkTemperature</code></pre><p>A type to represent the interface temperature used in fixed-point iteration for interface fluxes following similarity theory. The interface temperature is not calculated but instead provided by either the ocean or the sea ice model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/InterfaceComputations/interface_states.jl#L140-L146">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.InterfaceComputations.ComponentInterfaces" href="#ClimaOcean.OceanSeaIceModels.InterfaceComputations.ComponentInterfaces"><code>ClimaOcean.OceanSeaIceModels.InterfaceComputations.ComponentInterfaces</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ComponentInterfaces(atmosphere, ocean, sea_ice=nothing;
                    radiation = Radiation(),
                    freshwater_density = 1000,
                    atmosphere_ocean_flux_formulation = SimilarityTheoryFluxes(),
                    atmosphere_sea_ice_flux_formulation = SimilarityTheoryFluxes(eltype(ocean.model.grid)),
                    atmosphere_ocean_interface_temperature = BulkTemperature(),
                    atmosphere_ocean_interface_specific_humidity = default_ao_specific_humidity(ocean),
                    atmosphere_sea_ice_interface_temperature = default_ai_temperature(sea_ice),
                    ocean_reference_density = reference_density(ocean),
                    ocean_heat_capacity = heat_capacity(ocean),
                    ocean_temperature_units = DegreesCelsius(),
                    sea_ice_temperature_units = DegreesCelsius(),
                    sea_ice_reference_density = reference_density(sea_ice),
                    sea_ice_heat_capacity = heat_capacity(sea_ice),
                    gravitational_acceleration = g_Earth)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/InterfaceComputations/component_interfaces.jl#L296-L312">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.InterfaceComputations.LatitudeDependentAlbedo" href="#ClimaOcean.OceanSeaIceModels.InterfaceComputations.LatitudeDependentAlbedo"><code>ClimaOcean.OceanSeaIceModels.InterfaceComputations.LatitudeDependentAlbedo</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LatitudeDependentAlbedo([FT::DataType=Float64]; diffuse = 0.069, direct = 0.011)</code></pre><p>Constructs a <code>LatitudeDependentAlbedo</code> object. The albedo of the ocean surface is assumed to be a function of the latitude, obeying the following formula (Large and Yeager, 2009):</p><pre><code class="nohighlight hljs">Œ±(œÜ) = Œ±.diffuse - Œ±.direct * cos(2œÜ)</code></pre><p>where <code>œÜ</code> is the latitude, <code>Œ±.diffuse</code> is the diffuse albedo, and <code>Œ±.direct</code> is the direct albedo.</p><p><strong>Arguments</strong></p><ul><li><code>FT::DataType</code>: The data type of the albedo values. Default is <code>Float64</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>diffuse</code>: The diffuse albedo value. Default is <code>0.069</code>.</li><li><code>direct</code>: The direct albedo value. Default is <code>0.011</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/InterfaceComputations/latitude_dependent_albedo.jl#L9-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.InterfaceComputations.Radiation" href="#ClimaOcean.OceanSeaIceModels.InterfaceComputations.Radiation"><code>ClimaOcean.OceanSeaIceModels.InterfaceComputations.Radiation</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Radiation([arch = CPU(), FT=Float64];
          ocean_emissivity = 0.97,
          sea_ice_emissivity = 1.0,
          ocean_albedo = 0.05,
          sea_ice_albedo = 0.7,
          stefan_boltzmann_constant = 5.67e-8)</code></pre><p>Constructs a <code>Radiation</code> object that represents the radiation properties of the ocean and sea ice.</p><p><strong>Arguments</strong></p><ul><li><code>arch</code>: The architecture of the system. Default: <code>CPU()</code>.</li><li><code>FT</code>: The floating-point type to use. Default: <code>Float64</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>ocean_emissivity</code>: The emissivity of the ocean surface. Default: <code>0.97</code>.</li><li><code>sea_ice_emissivity</code>: The emissivity of the sea ice surface. Default: <code>1.0</code>.</li><li><code>ocean_albedo</code>: The albedo of the ocean surface. Default: <code>0.05</code>.</li><li><code>sea_ice_albedo</code>: The albedo of the sea ice surface. Default: <code>0.7</code>.</li><li><code>stefan_boltzmann_constant</code>: The Stefan-Boltzmann constant. Default: <code>5.67e-8</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/InterfaceComputations/radiation.jl#L16-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.InterfaceComputations.SimilarityTheoryFluxes" href="#ClimaOcean.OceanSeaIceModels.InterfaceComputations.SimilarityTheoryFluxes"><code>ClimaOcean.OceanSeaIceModels.InterfaceComputations.SimilarityTheoryFluxes</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SimilarityTheoryFluxes(FT::DataType = Float64;
                       gravitational_acceleration = 9.81,
                       von_karman_constant = 0.4,
                       turbulent_prandtl_number = 1,
                       gustiness_parameter = 1,
                       stability_functions = default_stability_functions(FT),
                       roughness_lengths = default_roughness_lengths(FT),
                       similarity_form = LogarithmicSimilarityProfile(),
                       solver_stop_criteria = nothing,
                       solver_tolerance = 1e-8,
                       solver_maxiter = 100)</code></pre><p><code>SimilarityTheoryFluxes</code> contains parameters and settings to calculate air-interface turbulent fluxes using Monin-Obukhov similarity theory.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>von_karman_constant</code>: The von Karman constant. Default: 0.4.</li><li><code>turbulent_prandtl_number</code>: The turbulent Prandtl number. Default: 1.</li><li><code>gustiness_parameter</code>: Increases surface fluxes in low wind conditions. Default: 1.</li><li><code>stability_functions</code>: The stability functions. Default: <code>default_stability_functions(FT)</code> that follow the                        formulation of Edson et al. (2013).</li><li><code>roughness_lengths</code>: The roughness lengths used to calculate the characteristic scales for momentum, temperature and                      water vapor. Default: <code>default_roughness_lengths(FT)</code>, formulation taken from Edson et al (2013).</li><li><code>similarity_form</code>: The type of similarity profile used to relate the atmospheric state to the                            interface fluxes / characteristic scales.</li><li><code>solver_tolerance</code>: The tolerance for convergence. Default: 1e-8.</li><li><code>solver_maxiter</code>: The maximum number of iterations. Default: 100.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/InterfaceComputations/similarity_theory_turbulent_fluxes.jl#L59-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.OceanSeaIceModels.InterfaceComputations.SkinTemperature" href="#ClimaOcean.OceanSeaIceModels.InterfaceComputations.SkinTemperature"><code>ClimaOcean.OceanSeaIceModels.InterfaceComputations.SkinTemperature</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SkinTemperature</code></pre><p>A type to represent the interface temperature used in the flux calculation. The interface temperature is calculated from the flux balance at the interface. In particular, the interface temperature <span>$T‚Çõ$</span> is the root of:</p><p class="math-container">\[F(T‚Çõ) - J·µÄ = 0\]</p><p>where <span>$J·µÄ$</span> are the fluxes at the top of the interface (turbulent + radiative), and <span>$F$</span> is the internal diffusive flux dependent on the interface temperature itself.</p><p>Note that all fluxes positive upwards.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/d8cfe73c79805baf277c5e85c3bf25b2b0994309/src/OceanSeaIceModels/InterfaceComputations/interface_states.jl#L156-L171">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../outline/">¬´ Contents</a><a class="docs-footer-nextpage" href="../internals/">Private ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.0 on <span class="colophon-date" title="Saturday 10 May 2025 16:27">Saturday 10 May 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
